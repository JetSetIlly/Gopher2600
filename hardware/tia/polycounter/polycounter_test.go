package polycounter_test

import (
	"fmt"
	"gopher2600/hardware/tia/polycounter"
	"testing"
)

const correctSequence = "000000/0000000/1000000/2000000/3100000/0100000/1100000/2100000/3110000/0110000/1110000/2110000/3111000/0111000/1111000/2111000/3111100/0111100/1111100/2111100/3111110/0111110/1111110/2111110/3011111/0011111/1011111/2011111/3101111/0101111/1101111/2101111/3110111/0110111/1110111/2110111/3111011/0111011/1111011/2111011/3111101/0111101/1111101/2111101/3011110/0011110/1011110/2011110/3001111/0001111/1001111/2001111/3100111/0100111/1100111/2100111/3110011/0110011/1110011/2110011/3111001/0111001/1111001/2111001/3011100/0011100/1011100/2011100/3101110/0101110/1101110/2101110/3010111/0010111/1010111/2010111/3101011/0101011/1101011/2101011/3110101/0110101/1110101/2110101/3011010/0011010/1011010/2011010/3001101/0001101/1001101/2001101/3000110/0000110/1000110/2000110/3000011/0000011/1000011/2000011/3100001/0100001/1100001/2100001/3010000/0010000/1010000/2010000/3101000/0101000/1101000/2101000/3110100/0110100/1110100/2110100/3111010/0111010/1111010/2111010/3011101/0011101/1011101/2011101/3001110/0001110/1001110/2001110/3000111/0000111/1000111/2000111/3100011/0100011/1100011/2100011/3110001/0110001/1110001/2110001/3011000/0011000/1011000/2011000/3101100/0101100/1101100/2101100/3110110/0110110/1110110/2110110/3011011/0011011/1011011/2011011/3101101/0101101/1101101/2101101/3010110/0010110/1010110/2010110/3001011/0001011/1001011/2001011/3100101/0100101/1100101/2100101/3010010/0010010/1010010/2010010/3001001/0001001/1001001/2001001/3000100/0000100/1000100/2000100/3100010/0100010/1100010/2100010/3010001/0010001/1010001/2010001/3001000/0001000/1001000/2001000/3100100/0100100/1100100/2100100/3110010/0110010/1110010/2110010/3011001/0011001/1011001/2011001/3001100/0001100/1001100/2001100/3100110/0100110/1100110/2100110/3010011/0010011/1010011/2010011/3101001/0101001/1101001/2101001/3010100/0010100/1010100/2010100/3101010/0101010/1101010/2101010/3010101/0010101/1010101/2010101/3001010/0001010/1001010/2001010/3000101/0000101/1000101/2000101/3000010/0000010/1000010/2000010/3000001/0000001/1000001/2000001/3111111/0111111/1111111/2111111/3"

func TestPolycounter(t *testing.T) {
	pk := new(polycounter.Polycounter)
	pk.Reset("111111")
	s := fmt.Sprintf("%s", pk)
	for pk.Tick() == false {
		s = fmt.Sprintf("%s%s", s, pk)
	}
	if s != correctSequence {
		t.Fatalf("polycounter sequence has failed")
	}
}
